{"version":3,"sources":["webpack://limitless-[name]/./src/views/offline/index.vue","webpack://limitless-[name]/./src/views/offline/index.vue?2894","webpack://limitless-[name]/./node_modules/core-js/modules/es.array.map.js"],"names":["offset","style","label-in-value","ref","size","handleChange","placeholder","map","mapinfo","item","key","mapName","value","mapId","minLv","maxLv","type","html-type","start_offline","visiable","align","offlinestatus","status","start_time","exp_total","battle_total","victory_total","goods_total","start_exp","stop_offline","setup","store","user","state","account","currentAccount","mapchoosed","battleForm","chara_id","map_id","battle_type","checkstatus","taskStatus","charaId","res","data","formatMsgTime","console","log","queryMapList","taskStart","message","info","taskStop","dateTimeStamp","result","minute","hour","day","month","now","Date","getTime","diffValue","monthC","weekC","dayC","hourC","minC","parseInt","router","push","name","render","$","$map","arrayMethodHasSpeciesSupport","arrayMethodUsesToLength","HAS_SPECIES_SUPPORT","USES_TO_LENGTH","target","proto","forced","callbackfn","this","arguments","length","undefined"],"mappings":"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","file":"js/chunk-1cef9b5b.79a08091.js","sourcesContent":["<template>\r\n  <br /><br />\r\n  <a-row>\r\n    <a-col v-show=\"visiable.visiable\" :offset=1 style=\"font-size: 0.15rem\">\r\n      <a-select label-in-value ref=\"select\" style=\"width: 300px\" size=\"small\" @change=\"handleChange\" placeholder=\"请选择地图\">\r\n        <a-select-option v-for=\"item in map.mapinfo\" v-bind:key=\"item.mapName\" v-bind:value=\"item.mapId\">{{ item.mapName + item.minLv + \"-\" + item.maxLv }}</a-select-option>\r\n      </a-select>\r\n      <a-button type=\"primary\" html-type=\"submit\" @click=\"start_offline\">开始离线</a-button>\r\n    </a-col>\r\n    <a-col v-show=\"!visiable.visiable\" :offset=1 style=\"font-size: 0.15rem\" align=\"left\">\r\n      <h2>离线状态查看</h2>\r\n      <h1>开始时间：{{ offlinestatus.status.start_time }}</h1>\r\n      <h1>总经验：{{ offlinestatus.status.exp_total }}</h1>\r\n      <h1>\r\n        战斗场次/胜利场次：{{ offlinestatus.status.battle_total }}/{{\r\n          offlinestatus.status.victory_total\r\n        }}\r\n      </h1>\r\n      <h1>获得物品总数：{{ offlinestatus.status.goods_total }}</h1>\r\n      <h1>真实经验总数：{{ offlinestatus.status.start_exp }}</h1>\r\n      <br />\r\n      <a-button type=\"primary\" html-type=\"submit\" @click=\"stop_offline\">停止</a-button>\r\n    </a-col>\r\n  </a-row>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent, reactive } from \"vue\";\r\nimport { originApis } from \"@/api\";\r\nimport { battleTaskApis } from \"@/api\";\r\nimport { message } from \"ant-design-vue\";\r\nimport { useStore } from \"vuex\";\r\nimport router from \"@/router/index.js\";\r\nexport default defineComponent({\r\n  setup() {\r\n    const store = useStore();\r\n    var offlinestatus = reactive({\r\n      status: {},\r\n    });\r\n    var visiable = reactive({ visiable: true });\r\n    const user = store.state.account.currentAccount;\r\n    var map = reactive({ mapinfo: [], mapchoosed: 0 });\r\n    const handleChange = (value) => {\r\n      map.mapchoosed = value.value;\r\n    };\r\n    const battleForm = reactive({\r\n      chara_id: \"aa\",\r\n      map_id: 11,\r\n      battle_type: 1,\r\n    });\r\n\r\n    const checkstatus = async () => {\r\n      try {\r\n        const res = await battleTaskApis.taskStatus(user.charaId);\r\n        if (res.status == 0) {\r\n          visiable.visiable = false;\r\n          offlinestatus.status = res.data;\r\n          offlinestatus.status.start_time = formatMsgTime(\r\n            offlinestatus.status.start_time\r\n          );\r\n        } else {\r\n          visiable.visiable = true;\r\n        }\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    const queryMapList = async () => {\r\n      try {\r\n        const res = await originApis.queryMapList();\r\n        map.mapinfo = res.data;\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n\r\n    const start_offline = async () => {\r\n      try {\r\n        battleForm.chara_id = user.charaId;\r\n        battleForm.map_id = map.mapchoosed - 1 + 1;\r\n        const res = await battleTaskApis.taskStart(battleForm);\r\n        console.log(res);\r\n        message.info(\"离线战斗已开始！\");\r\n        checkstatus();\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    const stop_offline = async () => {\r\n      try {\r\n        const res = await battleTaskApis.taskStop(user.charaId);\r\n\r\n        console.log(res);\r\n        message.info(\"离线战斗已停止！\");\r\n        checkstatus();\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n    const formatMsgTime = (dateTimeStamp) => {\r\n      var result = \"\";\r\n      var minute = 60;\r\n      var hour = minute * 60;\r\n      var day = hour * 24;\r\n      var month = day * 30;\r\n      var now = new Date().getTime() / 1000;\r\n      var diffValue = now - dateTimeStamp;\r\n      if (diffValue < 0) {\r\n        return;\r\n      }\r\n      var monthC = diffValue / month;\r\n      var weekC = diffValue / (7 * day);\r\n      var dayC = diffValue / day;\r\n      var hourC = diffValue / hour;\r\n      var minC = diffValue / minute;\r\n      if (monthC >= 1) {\r\n        result = \"\" + parseInt(monthC) + \"月前\";\r\n      } else if (weekC >= 1) {\r\n        result = \"\" + parseInt(weekC) + \"周前\";\r\n      } else if (dayC >= 1) {\r\n        result = \"\" + parseInt(dayC) + \"天前\";\r\n      } else if (hourC >= 1) {\r\n        result = \"\" + parseInt(hourC) + \"小时前\";\r\n      } else if (minC >= 1) {\r\n        result = \"\" + parseInt(minC) + \"分钟前\";\r\n      } else result = \"刚刚\";\r\n      return result;\r\n    };\r\n    if (user.charaId) {\r\n      console.log(\"111\");\r\n      queryMapList();\r\n      checkstatus();\r\n      console.log(visiable);\r\n    } else {\r\n      message.info(\"请先登录!或设为当前账号！\");\r\n      router.push(\"/welcome\");\r\n    }\r\n    return {\r\n      map,\r\n      queryMapList,\r\n      visiable,\r\n      battleForm,\r\n      start_offline,\r\n      stop_offline,\r\n      handleChange,\r\n      offlinestatus,\r\n      checkstatus,\r\n    };\r\n  },\r\n  name: \"offline\",\r\n});\r\n</script>","import { render } from \"./index.vue?vue&type=template&id=4020ac49\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}